@page "/dashboard"
@using ExpenseTracker.app.Service
@inject DatabaseService Database

<MudContainer MaxWidth="MaxWidth.Medium" Style="margin-top: 20px;">
    <MudGrid>
        <MudItem xs="12" sm="4">
            <MudCard>
                <MudCardHeader><MudText Typo="Typo.h6">Total Income</MudText></MudCardHeader>
                <MudCardContent><MudText Typo="Typo.h5">@TotalIncome.ToString("C")</MudText></MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="4">
            <MudCard>
                <MudCardHeader><MudText Typo="Typo.h6">Total Expense</MudText></MudCardHeader>
                <MudCardContent><MudText Typo="Typo.h5">@TotalExpenses.ToString("C")</MudText></MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="4">
            <MudCard>
                <MudCardHeader><MudText Typo="Typo.h6">Total Debt</MudText></MudCardHeader>
                <MudCardContent><MudText Typo="Typo.h5">@TotalDebt.ToString("C")</MudText></MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private decimal TotalIncome;
    private decimal TotalExpenses;
    private decimal TotalDebt;

    protected override async Task OnInitializedAsync()
    {
        TotalIncome = await Database.GetTotalAsync("Income");
        TotalExpenses = await Database.GetTotalAsync("Expense");
        
    }
}
